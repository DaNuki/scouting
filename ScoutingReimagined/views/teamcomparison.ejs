<!DOCTYPE html>
<html lang="en">

<head>
    <% include templates/head.ejs %>
</head>

<body>
<!-- START PAGE CONTAINER -->
<div class="page-container">

    <% include templates/sidebar.ejs %>

    <!-- PAGE CONTENT -->
    <div class="page-content">

        <% include templates/xnavigation.ejs%>

        <!-- START BREADCRUMB -->
        <ul class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li><a href="#">Forms Stuff</a></li>
            <li><a href="#">Form Layout</a></li>
            <li class="active">One Column</li>
        </ul>
        <!-- END BREADCRUMB -->

        <!-- PAGE CONTENT WRAPPER -->
        <div class="page-content-wrap">

            <div class="row">
                <div class="col-md-12">

                    <h1>
                        Scouting guide
                    </h1>

                    <h2>
                        Introduction
                    </h2>

                    <h2>
                        Inserting inputs
                    </h2>

                    <h2>
                        Observing outputs
                    </h2>

                   <%
                       var events = JSON.parse(JSON.stringify(events));
                       console.log(JSON.stringify(events));

                       shooting_data_per_team = {}



                       for(e in events) {
                           var events = events[e]
                           event_data = event['_source']
                           teamNumber = event_data['teamNumber']
                           if event['_type'] == 'gearplace' and event_data['status'] == 'Success' {
                               print event_data
                               if teamNumber in shooting_data_per_team:
                               print shooting_data_per_team[teamNumber]
                               count = (shooting_data_per_team[teamNumber]['count'] + 1)
                               game_ids = shooting_data_per_team[teamNumber]['game_ids']
                               game_ids.add(event_data['gameId'])
                           }
                           else {

                           }
                           count = 1
                           game_ids = set([event_data['gameId']])
                           shooting_data_per_team[teamNumber] = {
                               'count': count,
                               'game_ids': game_ids
                           }

                       }


                       top_teams = []
                       averageShootingPerTeam = {}

                       for teamNumber, teamData in shooting_data_per_team.iteritems():
                       top_teams.append({
                                   'teamNumber': teamNumber,
                                   'average': teamData['count'] / float(len(teamData['game_ids']))
                               }
                       )

                       def compare_averages(a, b):
                       return int(b['average']*100 - a['average']*100)

                       top_teams.sort(compare_averages)
                       # print top_teams[0:10]

                       for data in top_teams[0:10]:
                       print 'Team %s scores %f average gear places per game' % (data['teamNumber'], data['average'])
                   %>


                </div>
            </div>

        </div>
        <!-- END PAGE CONTENT WRAPPER -->
    </div>
    <!-- END PAGE CONTENT -->
</div>
<!-- END PAGE CONTAINER -->

<!-- START PRELOADS -->
<audio id="audio-alert" src="audio/alert.mp3" preload="auto"></audio>
<audio id="audio-fail" src="audio/fail.mp3" preload="auto"></audio>
<!-- END PRELOADS -->

<!-- START SCRIPTS -->
<!-- START PLUGINS -->
<script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/plugins/jquery/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/plugins/bootstrap/bootstrap.min.js"></script>
<!-- END PLUGINS -->

<!-- THIS PAGE PLUGINS -->
<script type='text/javascript' src='js/plugins/icheck/icheck.min.js'></script>
<script type="text/javascript" src="js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js"></script>

<script type="text/javascript" src="js/plugins/bootstrap/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="js/plugins/bootstrap/bootstrap-file-input.js"></script>
<script type="text/javascript" src="js/plugins/bootstrap/bootstrap-select.js"></script>
<script type="text/javascript" src="js/plugins/tagsinput/jquery.tagsinput.min.js"></script>
<!-- END THIS PAGE PLUGINS -->

<!-- START TEMPLATE -->
<script type="text/javascript" src="js/settings.js"></script>

<script type="text/javascript" src="js/plugins.js"></script>
<script type="text/javascript" src="js/actions.js"></script>
<!-- END TEMPLATE -->

<!-- END SCRIPTS -->

</body>

</html>
